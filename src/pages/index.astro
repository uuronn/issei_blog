---
import Layout from '../layouts/Layout.astro'
import Card from '../components/Card.astro'
import { getBlogs } from '../library/microcms'
import { formatStringDateAndTime } from '../utils/formatStringData'

const res = await getBlogs({ limit: 10 })

if (!res) throw new Error('not res')
---

<Layout title="Welcome to Astro.">
  <main>
    <h1>いっせいblog</h1>
    <ul role="list" class="link-card-grid">
      {
        res.contents.map((content) => (
          <Card
            href={`/blog/${content.id}`}
            title={content.title}
            content={content.content}
            createdAt={formatStringDateAndTime(content.createdAt)}
          />
        ))
      }
    </ul>
  </main>
</Layout>

<style>
  main {
    margin: auto;
    padding: 1.5rem;
    max-width: 60ch;
  }

  h1 {
    font-size: 3rem;
    font-weight: 800;
    margin: 0;
    text-align: center;
  }

  .link-card-grid {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
</style>
