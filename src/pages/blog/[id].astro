---
import Layout from '../../layouts/Layout.astro'
import { getBlog, getBlogs } from '../../library/microcms'
import { formatStringDateAndTime } from '../../utils/formatStringData'

export async function getStaticPaths({}) {
  const res = await getBlogs({ limit: 100 })

  return res.contents.map((content) => {
    return {
      params: { id: content.id }
    }
  })
}

const { id } = Astro.params

if (!id) return

const blog = await getBlog(id)
---

<Layout title="記事一覧">
  <main>
    <h1 class="title">{blog.title}</h1>
    <hr />
    <p class="date">
      投稿日 {formatStringDateAndTime(blog.createdAt)}
    </p>
    <div class="content" set:html={blog.content} />
  </main>
</Layout>

<style>
  .title {
    padding: 24px;
  }

  .date {
    text-align: right;
  }

  .content {
    padding: 0 32px;
  }
</style>
